!function(t,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):(t="undefined"!=typeof globalThis?globalThis:t||self).QuillResizeModule=i()}(this,function(){"use strict";var t=function(i,o){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,i){t.__proto__=i}||function(t,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])},t(i,o)},i=function(){return i=Object.assign||function(t){for(var i,o=1,e=arguments.length;o<e;o++)for(var r in i=arguments[o])Object.prototype.hasOwnProperty.call(i,r)&&(t[r]=i[r]);return t},i.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError,function(t,i){void 0===i&&(i={});var o=i.insertAt;if(t&&"undefined"!=typeof document){var e=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===o&&e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}("#editor-resizer{background-color:rgba(0,0,0,.5);border:1px dashed #fff;position:absolute}#editor-resizer .handler{background-color:hsla(0,0%,100%,.8);border:1px solid #333;bottom:-5px;cursor:nwse-resize;height:10px;position:absolute;right:-5px;user-select:none;width:10px}#editor-resizer .toolbar{background-color:#fff;border:1px solid #fff;border-radius:3px;box-shadow:0 0 3px rgba(0,0,0,.5);left:50%;max-width:400px;min-width:200px;padding:.5em;position:absolute;top:-3em;transform:translateX(-50%);white-space:normal;z-index:1000}#editor-resizer .toolbar.small-object{min-width:250px;top:-4em}#editor-resizer .toolbar.very-small-object{left:0;min-width:300px;top:-5em;transform:none}#editor-resizer .toolbar .group{border:1px solid #aaa;border-radius:6px;display:flex;flex-wrap:wrap;overflow:hidden;text-align:center;white-space:nowrap}#editor-resizer .toolbar .group:not(:first-child){margin-top:.5em}#editor-resizer .toolbar .group .btn{color:rgba(0,0,0,.65);display:inline-block;flex:1 0 auto;font-size:.85em;line-height:1.8;min-width:40px;overflow:hidden;padding:0 .3rem;text-align:center;text-overflow:ellipsis;user-select:none;vertical-align:top;white-space:nowrap}#editor-resizer .toolbar .group .btn.btn-group{display:inline-flex;line-height:1.8em;min-width:60px;padding:0}#editor-resizer .toolbar .group .btn.btn-group .inner-btn{cursor:pointer;flex:1 0 0;font-size:1.5em;width:50%}#editor-resizer .toolbar .group .btn.btn-group .inner-btn:first-child{border-right:1px solid #ddd}#editor-resizer .toolbar .group .btn.btn-group .inner-btn:active{transform:scale(.8)}#editor-resizer .toolbar .group .btn:not(:last-child){border-right:1px solid #bbb}#editor-resizer .toolbar .group .btn:not(.btn-group):active{background-color:rgba(0,0,0,.1)}#editor-resizer .toolbar .group .btn:hover{position:relative}#editor-resizer .toolbar .group .btn:hover:after{background-color:#333;border-radius:4px;bottom:100%;color:#fff;content:attr(data-full-text);font-size:12px;left:50%;opacity:0;padding:4px 8px;pointer-events:none;position:absolute;transform:translateX(-50%);transition:opacity .3s;white-space:nowrap;z-index:1001}#editor-resizer .toolbar .group .btn:hover:hover:after{opacity:1}#editor-resizer .toolbar .group .input-wrapper{align-items:center;display:inline-flex;flex:1 0 auto;min-width:60px;position:relative}#editor-resizer .toolbar .group .input-wrapper input{border:1px solid #ddd;border-radius:2px;font-size:.85em;padding:2px 4px;text-align:center;width:40px}#editor-resizer .toolbar .group .input-wrapper .suffix{font-size:.75em;margin-left:2px}#editor-resizer .toolbar .group .input-wrapper .tooltip{background-color:#333;border-radius:4px;bottom:100%;color:#fff;font-size:11px;left:50%;opacity:0;padding:4px 8px;pointer-events:none;position:absolute;transform:translateX(-50%);transition:opacity .3s;white-space:nowrap;z-index:1001}#editor-resizer .toolbar .group .input-wrapper:hover .tooltip{opacity:1}#editor-resizer .last-item{margin-right:5px}#editor-resizer .showSize{background-color:hsla(0,0%,100%,.8);border:1px solid hsla(0,0%,100%,.8);border-radius:2px;box-shadow:0 0 3px rgba(0,0,0,.5);font-size:.8em;left:50%;padding:.1em;position:absolute;top:50%;transform:translateX(-50%)}");var o,e=function(){function t(t){this.config=i(i({},r),t)}return t.prototype.findLabel=function(t){return this.config?Reflect.get(this.config,t):null},t}(),r={altTip:"Hold down the alt key to zoom",floatLeft:"Left",floatRight:"Right",center:"Center",restore:"Restore",inputTip:"Enter width percentage"};(function(i,o){if("function"!=typeof o&&null!==o)throw new TypeError("Class extends value "+String(o)+" is not a constructor or null");function e(){this.constructor=i}t(i,o),i.prototype=null===o?Object.create(o):(e.prototype=o.prototype,new e)})(function(){var t=null!==o&&o.apply(this,arguments)||this;return t.originSize=null,t},o=HTMLElement);var n=function(){function t(t,i,o){this.resizer=null,this.startResizePosition=null,this.i18n=new e((null==o?void 0:o.locale)||r),this.options=o,this.resizeTarget=t,t.originSize||(t.originSize={width:t.clientWidth,height:t.clientHeight}),this.container=i,this.initResizer(),this.positionResizerToTarget(t),this.resizing=this.resizing.bind(this),this.endResize=this.endResize.bind(this),this.startResize=this.startResize.bind(this),this.toolbarClick=this.toolbarClick.bind(this),this.toolbarInputChange=this.toolbarInputChange.bind(this),this.bindEvents()}return t.prototype.initResizer=function(){var t=this.container.querySelector("#editor-resizer");t||((t=document.createElement("div")).setAttribute("id","editor-resizer"),t.innerHTML=function(t){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];return t.replace(/\{(\d+)\}/g,function(t,o){return i.length>o?i[o]:""})}('\n<div class="handler" title="{0}"></div>\n<div class="toolbar">\n  <div class="group">\n    <a class="btn" data-type="width" data-styles="width:100%">100%</a>\n    <a class="btn" data-type="width" data-styles="width:50%">50%</a>\n    <span class="input-wrapper"><input data-type="width" maxlength="3" /><span class="suffix">%</span><span class="tooltip">{5}</span></span>\n    <a class="btn" data-type="width" data-styles="width:auto; height:auto;">{4}</a>\n  </div>\n  <div class="group">\n    <a class="btn" data-type="align" data-styles="float:left">{1}</a>\n    <a class="btn" data-type="align" data-styles="display:block;margin:auto;">{2}</a>\n    <a class="btn" data-type="align" data-styles="float:right;">{3}</a>\n    <a class="btn" data-type="align" data-styles="">{4}</a>\n  </div>\n</div>\n',this.i18n.findLabel("altTip"),this.i18n.findLabel("floatLeft"),this.i18n.findLabel("center"),this.i18n.findLabel("floatRight"),this.i18n.findLabel("restore"),this.i18n.findLabel("inputTip")),this.container.appendChild(t)),this.resizer=t},t.prototype.positionResizerToTarget=function(t){if(null!==this.resizer){if(!t.isContentEditable)return;var i=this.container.getBoundingClientRect(),o=t.getBoundingClientRect();this.resizer.style.setProperty("left",o.left-i.left+"px"),this.resizer.style.setProperty("top",o.top-i.top+"px"),this.resizer.style.setProperty("width",t.clientWidth+"px"),this.resizer.style.setProperty("height",t.clientHeight+"px");var e=this.resizer.querySelector(".toolbar");e&&(e.classList.remove("small-object","very-small-object"),t.clientWidth<150?e.classList.add("very-small-object"):t.clientWidth<250&&e.classList.add("small-object"),e.querySelectorAll(".btn").forEach(function(t){var i=t;i.scrollWidth>i.clientWidth&&(i.dataset.fullText=i.textContent||"")}))}},t.prototype.bindEvents=function(){var t,i=this;null!==this.resizer&&(this.resizer.addEventListener("mousedown",this.startResize),this.resizer.addEventListener("click",this.toolbarClick),this.resizer.addEventListener("change",this.toolbarInputChange)),window.addEventListener("mouseup",this.endResize),window.addEventListener("mousemove",this.resizing),null===(t=function(t){if(null==t)return null;for(var i=/(auto|scroll)/,o=[],e=t;e;)o.push(e),e=e.parentElement;for(var r=0;r<o.length;r++){var n=getComputedStyle(o[r]);if(i.test(n.overflow+n.overflowY+n.overflowX))return o[r];if("BODY"===o[r].tagName)return o[r]}return null}(this.resizeTarget))||void 0===t||t.addEventListener("scroll",function(){i.positionResizerToTarget(i.resizeTarget)})},t.prototype.t=function(t,i){var o,e="_styles_".concat(t),r=this.resizeTarget.style,n=this.resizeTarget[e];r.cssText=r.cssText.replaceAll(" ","").replace(n,"")+";".concat(i),this.resizeTarget[e]=i,this.positionResizerToTarget(this.resizeTarget),null===(o=this.options)||void 0===o||o.onChange(this.resizeTarget)},t.prototype.toolbarInputChange=function(t){var i,o=t.target,e=null===(i=null==o?void 0:o.dataset)||void 0===i?void 0:i.type,r=o.value;e&&Number(r)&&this.t(e,"width: ".concat(Number(r),"%;"))},t.prototype.toolbarClick=function(t){var i,o,e=t.target,r=null===(i=null==e?void 0:e.dataset)||void 0===i?void 0:i.type;r&&e.classList.contains("btn")&&this.t(r,null===(o=null==e?void 0:e.dataset)||void 0===o?void 0:o.styles)},t.prototype.startResize=function(t){t.target.classList.contains("handler")&&1===t.which&&(this.startResizePosition={left:t.clientX,top:t.clientY,width:this.resizeTarget.clientWidth,height:this.resizeTarget.clientHeight})},t.prototype.endResize=function(){var t;this.startResizePosition=null,null===(t=this.options)||void 0===t||t.onChange(this.resizeTarget)},t.prototype.resizing=function(t){if(this.startResizePosition){var i=t.clientX-this.startResizePosition.left,o=t.clientY-this.startResizePosition.top,e=this.startResizePosition.width,r=this.startResizePosition.height;if(e+=i,r+=o,t.altKey){var n=this.resizeTarget.originSize;r=n.height/n.width*e}this.resizeTarget.style.setProperty("width",Math.max(e,30)+"px"),this.resizeTarget.style.setProperty("height",Math.max(r,30)+"px"),this.positionResizerToTarget(this.resizeTarget)}},t.prototype.destory=function(){this.container.removeChild(this.resizer),window.removeEventListener("mouseup",this.endResize),window.removeEventListener("mousemove",this.resizing),this.resizer=null},t}(),s=function(t,i){this.element=t,this.cb=i,this.hasTracked=!1},a=function(){function t(){}return t.track=function(i,o){var e=this.iframes.find(function(t){return t.element===i});e?e.cb=o:(this.iframes.push(new s(i,o)),this.interval||(this.interval=setInterval(function(){t.checkClick()},this.resolution)))},t.checkClick=function(){var t=document.activeElement;if(t)for(var i=0,o=this.iframes;i<o.length;i++){var e=o[i];t===e.element?!1===e.hasTracked&&(e.cb(),e.hasTracked=!0):e.hasTracked=!1}},t.resolution=200,t.iframes=[],t.interval=null,t}();return function(t,i){var o,e,r=t.root;r.addEventListener("click",function(t){var s=t.target;t.target&&["img","video"].includes(s.tagName.toLowerCase())&&(o=s,e=new n(s,r.parentElement,i))}),t.on("text-change",function(t,s){r.querySelectorAll("iframe").forEach(function(t){!function(t){var i=t.getAttribute("src")||"";if(/(?:youtube\.com|youtu\.be)/i.test(i)){var o=function(t){for(var i=0,o=[/(?:youtube\.com\/watch\?v=)([\w-]{11})/i,/(?:youtube\.com\/embed\/)([\w-]{11})/i,/(?:youtu\.be\/)([\w-]{11})/i];i<o.length;i++){var e=o[i].exec(t);if(null==e?void 0:e[1])return e[1]}return null}(i);if(o){var e=encodeURIComponent(globalThis.location.origin),r="https://www.youtube.com/embed/".concat(o)+"?enablejsapi=1&playsinline=1&origin=".concat(e,"&rel=0");t.src!==r&&(t.src=r),t.referrerPolicy="strict-origin-when-cross-origin",t.allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"}}}(t),a.track(t,function(){o=t,e=new n(t,r.parentElement,i)})})}),document.addEventListener("mousedown",function(t){var i,r,n,s=t.target;s===o||(null===(r=null===(i=null==e?void 0:e.resizer)||void 0===i?void 0:i.contains)||void 0===r?void 0:r.call(i,s))||(null===(n=null==e?void 0:e.destory)||void 0===n||n.call(e),e=null,o=null)},{capture:!0})}});
