!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).QuillResizeModule=e()}(this,function(){"use strict";var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};var e=function(){return e=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},e.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;!function(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var i=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===n&&i.firstChild?i.insertBefore(r,i.firstChild):i.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}("#editor-resizer {\n  position: absolute;\n  border: 1px dashed #fff;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n#editor-resizer .handler {\n  position: absolute;\n  right: -5px;\n  bottom: -5px;\n  width: 10px;\n  height: 10px;\n  border: 1px solid #333;\n  background-color: rgba(255, 255, 255, 0.8);\n  cursor: nwse-resize;\n  user-select: none;\n}\n#editor-resizer .toolbar {\n  position: absolute;\n  top: -3em;\n  left: 50%;\n  min-width: 200px;\n  /* Minimum width for small objects */\n  max-width: 400px;\n  /* Maximum width for very small objects */\n  padding: 0.5em;\n  border: 1px solid #fff;\n  border-radius: 3px;\n  background-color: #fff;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);\n  transform: translateX(-50%);\n  z-index: 1000;\n  white-space: normal;\n  /* Allow text wrapping */\n  /* Responsive positioning for very small objects */\n}\n#editor-resizer .toolbar.small-object {\n  min-width: 250px;\n  top: -4em;\n}\n#editor-resizer .toolbar.very-small-object {\n  min-width: 300px;\n  top: -5em;\n  left: 0;\n  transform: none;\n}\n#editor-resizer .toolbar .group {\n  display: flex;\n  border: 1px solid #aaa;\n  border-radius: 6px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-align: center;\n  flex-wrap: wrap;\n  /* Allow wrapping for very small objects */\n  /* Input wrapper improvements */\n}\n#editor-resizer .toolbar .group:not(:first-child) {\n  margin-top: 0.5em;\n}\n#editor-resizer .toolbar .group .btn {\n  flex: 1 0 auto;\n  /* Allow buttons to shrink */\n  min-width: 40px;\n  /* Minimum button width */\n  text-align: center;\n  padding: 0 0.3rem;\n  /* Reduced padding */\n  display: inline-block;\n  color: rgba(0, 0, 0, 0.65);\n  vertical-align: top;\n  line-height: 1.8;\n  /* Slightly reduced line height */\n  user-select: none;\n  font-size: 0.85em;\n  /* Smaller font for tight spaces */\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  /* Tooltip for truncated text */\n}\n#editor-resizer .toolbar .group .btn.btn-group {\n  padding: 0;\n  display: inline-flex;\n  line-height: 1.8em;\n  min-width: 60px;\n}\n#editor-resizer .toolbar .group .btn.btn-group .inner-btn {\n  flex: 1 0 0;\n  font-size: 1.5em;\n  /* Smaller icons */\n  width: 50%;\n  cursor: pointer;\n}\n#editor-resizer .toolbar .group .btn.btn-group .inner-btn:first-child {\n  border-right: 1px solid #ddd;\n}\n#editor-resizer .toolbar .group .btn.btn-group .inner-btn:active {\n  transform: scale(0.8);\n}\n#editor-resizer .toolbar .group .btn:not(:last-child) {\n  border-right: 1px solid #bbb;\n}\n#editor-resizer .toolbar .group .btn:not(.btn-group):active {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n#editor-resizer .toolbar .group .btn:hover {\n  position: relative;\n}\n#editor-resizer .toolbar .group .btn:hover::after {\n  content: attr(data-full-text);\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 12px;\n  white-space: nowrap;\n  z-index: 1001;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.3s;\n}\n#editor-resizer .toolbar .group .btn:hover:hover::after {\n  opacity: 1;\n}\n#editor-resizer .toolbar .group .input-wrapper {\n  position: relative;\n  display: inline-flex;\n  align-items: center;\n  min-width: 60px;\n  flex: 1 0 auto;\n}\n#editor-resizer .toolbar .group .input-wrapper input {\n  width: 40px;\n  text-align: center;\n  border: 1px solid #ddd;\n  border-radius: 2px;\n  padding: 2px 4px;\n  font-size: 0.85em;\n}\n#editor-resizer .toolbar .group .input-wrapper .suffix {\n  font-size: 0.75em;\n  margin-left: 2px;\n}\n#editor-resizer .toolbar .group .input-wrapper .tooltip {\n  position: absolute;\n  bottom: 100%;\n  left: 50%;\n  transform: translateX(-50%);\n  background-color: #333;\n  color: white;\n  padding: 4px 8px;\n  border-radius: 4px;\n  font-size: 11px;\n  white-space: nowrap;\n  opacity: 0;\n  pointer-events: none;\n  transition: opacity 0.3s;\n  z-index: 1001;\n}\n#editor-resizer .toolbar .group .input-wrapper:hover .tooltip {\n  opacity: 1;\n}\n#editor-resizer .last-item {\n  margin-right: 5px;\n}\n#editor-resizer .showSize {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  padding: 0.1em;\n  border: 1px solid rgba(255, 255, 255, 0.8);\n  border-radius: 2px;\n  background-color: rgba(255, 255, 255, 0.8);\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);\n  transform: translateX(-50%);\n  font-size: 0.8em;\n  /* Smaller font for tight spaces */\n}\n");var n=function(){function t(t){this.config=e(e({},i),t)}return t.prototype.findLabel=function(t){return this.config?Reflect.get(this.config,t):null},t}(),i={altTip:"Hold down the alt key to zoom",floatLeft:"Left",floatRight:"Right",center:"Center",restore:"Restore",inputTip:"Enter width percentage"};!function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.originSize=null,t}(function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)})(n,e)}(HTMLElement);var r=function(){function t(t,e,r){this.resizer=null,this.startResizePosition=null,this.i18n=new n((null==r?void 0:r.locale)||i),this.options=r,this.resizeTarget=t,t.originSize||(t.originSize={width:t.clientWidth,height:t.clientHeight}),this.container=e,this.initResizer(),this.positionResizerToTarget(t),this.resizing=this.resizing.bind(this),this.endResize=this.endResize.bind(this),this.startResize=this.startResize.bind(this),this.toolbarClick=this.toolbarClick.bind(this),this.toolbarInputChange=this.toolbarInputChange.bind(this),this.bindEvents()}return t.prototype.initResizer=function(){var t=this.container.querySelector("#editor-resizer");t||((t=document.createElement("div")).setAttribute("id","editor-resizer"),t.innerHTML=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return t.replace(/\{(\d+)\}/g,function(t,n){return e.length>n?e[n]:""})}('\n<div class="handler" title="{0}"></div>\n<div class="toolbar">\n  <div class="group">\n    <a class="btn" data-type="width" data-styles="width:100%">100%</a>\n    <a class="btn" data-type="width" data-styles="width:50%">50%</a>\n    <span class="input-wrapper"><input data-type="width" maxlength="3" /><span class="suffix">%</span><span class="tooltip">{5}</span></span>\n    <a class="btn" data-type="width" data-styles="width:auto; height:auto;">{4}</a>\n  </div>\n  <div class="group">\n    <a class="btn" data-type="align" data-styles="float:left">{1}</a>\n    <a class="btn" data-type="align" data-styles="display:block;margin:auto;">{2}</a>\n    <a class="btn" data-type="align" data-styles="float:right;">{3}</a>\n    <a class="btn" data-type="align" data-styles="">{4}</a>\n  </div>\n</div>\n',this.i18n.findLabel("altTip"),this.i18n.findLabel("floatLeft"),this.i18n.findLabel("center"),this.i18n.findLabel("floatRight"),this.i18n.findLabel("restore"),this.i18n.findLabel("inputTip")),this.container.appendChild(t)),this.resizer=t},t.prototype.positionResizerToTarget=function(t){if(null!==this.resizer){if(!t.isContentEditable)return;var e=this.container.getBoundingClientRect(),n=t.getBoundingClientRect();this.resizer.style.setProperty("left",n.left-e.left+"px"),this.resizer.style.setProperty("top",n.top-e.top+"px"),this.resizer.style.setProperty("width",t.clientWidth+"px"),this.resizer.style.setProperty("height",t.clientHeight+"px");var i=this.resizer.querySelector(".toolbar");if(i)i.classList.remove("small-object","very-small-object"),t.clientWidth<150?i.classList.add("very-small-object"):t.clientWidth<250&&i.classList.add("small-object"),i.querySelectorAll(".btn").forEach(function(t){var e=t;e.scrollWidth>e.clientWidth&&(e.dataset.fullText=e.textContent||"")})}},t.prototype.bindEvents=function(){var t,e=this;null!==this.resizer&&(this.resizer.addEventListener("mousedown",this.startResize),this.resizer.addEventListener("click",this.toolbarClick),this.resizer.addEventListener("change",this.toolbarInputChange)),window.addEventListener("mouseup",this.endResize),window.addEventListener("mousemove",this.resizing),null===(t=function(t){if(null==t)return null;for(var e=/(auto|scroll)/,n=[],i=t;i;)n.push(i),i=i.parentElement;for(var r=0;r<n.length;r++){var o=getComputedStyle(n[r]);if(e.test(o.overflow+o.overflowY+o.overflowX))return n[r];if("BODY"===n[r].tagName)return n[r]}return null}(this.resizeTarget))||void 0===t||t.addEventListener("scroll",function(){e.positionResizerToTarget(e.resizeTarget)})},t.prototype._setStylesForToolbar=function(t,e){var n,i="_styles_".concat(t),r=this.resizeTarget.style,o=this.resizeTarget[i];r.cssText=r.cssText.replaceAll(" ","").replace(o,"")+";".concat(e),this.resizeTarget[i]=e,this.positionResizerToTarget(this.resizeTarget),null===(n=this.options)||void 0===n||n.onChange(this.resizeTarget)},t.prototype.toolbarInputChange=function(t){var e,n=t.target,i=null===(e=null==n?void 0:n.dataset)||void 0===e?void 0:e.type,r=n.value;i&&Number(r)&&this._setStylesForToolbar(i,"width: ".concat(Number(r),"%;"))},t.prototype.toolbarClick=function(t){var e,n,i=t.target,r=null===(e=null==i?void 0:i.dataset)||void 0===e?void 0:e.type;r&&i.classList.contains("btn")&&this._setStylesForToolbar(r,null===(n=null==i?void 0:i.dataset)||void 0===n?void 0:n.styles)},t.prototype.startResize=function(t){t.target.classList.contains("handler")&&1===t.which&&(this.startResizePosition={left:t.clientX,top:t.clientY,width:this.resizeTarget.clientWidth,height:this.resizeTarget.clientHeight})},t.prototype.endResize=function(){var t;this.startResizePosition=null,null===(t=this.options)||void 0===t||t.onChange(this.resizeTarget)},t.prototype.resizing=function(t){if(this.startResizePosition){var e=t.clientX-this.startResizePosition.left,n=t.clientY-this.startResizePosition.top,i=this.startResizePosition.width,r=this.startResizePosition.height;if(i+=e,r+=n,t.altKey){var o=this.resizeTarget.originSize;r=o.height/o.width*i}this.resizeTarget.style.setProperty("width",Math.max(i,30)+"px"),this.resizeTarget.style.setProperty("height",Math.max(r,30)+"px"),this.positionResizerToTarget(this.resizeTarget)}},t.prototype.destory=function(){this.container.removeChild(this.resizer),window.removeEventListener("mouseup",this.endResize),window.removeEventListener("mousemove",this.resizing),this.resizer=null},t}(),o=function(t,e){this.element=t,this.cb=e,this.hasTracked=!1},s=function(){function t(){}return t.track=function(e,n){this.iframes.push(new o(e,n)),this.interval||(this.interval=setInterval(function(){t.checkClick()},this.resolution))},t.checkClick=function(){if(document.activeElement){var t=document.activeElement;for(var e in this.iframes)t===this.iframes[e].element?0==this.iframes[e].hasTracked&&(this.iframes[e].cb.apply(window,[]),this.iframes[e].hasTracked=!0):this.iframes[e].hasTracked=!1}},t.resolution=200,t.iframes=[],t.interval=null,t}();return function(t,e){var n,i,o=t.root;o.addEventListener("click",function(t){var s=t.target;t.target&&["img","video"].includes(s.tagName.toLowerCase())&&(n=s,i=new r(s,o.parentElement,e))}),t.on("text-change",function(t,a){o.querySelectorAll("iframe").forEach(function(t){s.track(t,function(){n=t,i=new r(t,o.parentElement,e)})})}),document.addEventListener("mousedown",function(t){var e,r,o,s=t.target;s===n||(null===(r=null===(e=null==i?void 0:i.resizer)||void 0===e?void 0:e.contains)||void 0===r?void 0:r.call(e,s))||(null===(o=null==i?void 0:i.destory)||void 0===o||o.call(i),i=null,n=null)},{capture:!0})}});
