!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).QuillResizeModule=e()}(this,function(){"use strict";var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};var e=function(){return e=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},e.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;!function(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===i&&n.firstChild?n.insertBefore(r,n.firstChild):n.appendChild(r),r.styleSheet?r.styleSheet.cssText=t:r.appendChild(document.createTextNode(t))}}("#editor-resizer {\n  position: absolute;\n  border: 1px dashed #fff;\n  background-color: rgba(0, 0, 0, 0.5);\n}\n#editor-resizer .handler {\n  position: absolute;\n  right: -5px;\n  bottom: -5px;\n  width: 10px;\n  height: 10px;\n  border: 1px solid #333;\n  background-color: rgba(255, 255, 255, 0.8);\n  cursor: nwse-resize;\n  user-select: none;\n}\n#editor-resizer .toolbar {\n  position: absolute;\n  top: -3em;\n  left: 50%;\n  padding: 0.5em;\n  border: 1px solid #fff;\n  border-radius: 3px;\n  background-color: #fff;\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);\n  transform: translateX(-50%);\n}\n#editor-resizer .toolbar .group {\n  display: flex;\n  border: 1px solid #aaa;\n  border-radius: 6px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-align: center;\n}\n#editor-resizer .toolbar .group:not(:first-child) {\n  margin-top: 0.5em;\n}\n#editor-resizer .toolbar .group .btn {\n  flex: 1 0 0;\n  text-align: center;\n  width: 25%;\n  padding: 0 0.5rem;\n  display: inline-block;\n  color: rgba(0, 0, 0, 0.65);\n  vertical-align: top;\n  line-height: 2;\n  user-select: none;\n}\n#editor-resizer .toolbar .group .btn.btn-group {\n  padding: 0;\n  display: inline-flex;\n  line-height: 2em;\n}\n#editor-resizer .toolbar .group .btn.btn-group .inner-btn {\n  flex: 1 0 0;\n  font-size: 2em;\n  width: 50%;\n  cursor: pointer;\n}\n#editor-resizer .toolbar .group .btn.btn-group .inner-btn:first-child {\n  border-right: 1px solid #ddd;\n}\n#editor-resizer .toolbar .group .btn.btn-group .inner-btn:active {\n  transform: scale(0.8);\n}\n#editor-resizer .toolbar .group .btn:not(:last-child) {\n  border-right: 1px solid #bbb;\n}\n#editor-resizer .toolbar .group .btn:not(.btn-group):active {\n  background-color: rgba(0, 0, 0, 0.1);\n}\n#editor-resizer .last-item {\n  margin-right: 5px;\n}\n#editor-resizer .showSize {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  padding: 0.1em;\n  border: 1px solid rgba(255, 255, 255, 0.8);\n  border-radius: 2px;\n  background-color: rgba(255, 255, 255, 0.8);\n  box-shadow: 0 0 3px rgba(0, 0, 0, 0.5);\n  transform: translateX(-50%);\n}\n");var i,n,r=function(){function t(t){this.config=e(e({},o),t)}return t.prototype.findLabel=function(t){return this.config?Reflect.get(this.config,t):null},t}(),o={altTip:"Hold down the alt key to zoom",floatLeft:"Left",floatRight:"Right",center:"Center",restore:"Restore"};!function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.originSize=null,t}(function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)})(i,e)}(HTMLElement);var s=function(){function t(t,e,s){this.resizer=null,this.startResizePosition=null,this.i18n=new r((null==s?void 0:s.locale)||o),i=this.createToobar(s),this.resizeTarget=t,t.originSize||(t.originSize={width:t.clientWidth,height:t.clientHeight}),n=s,this.container=e,this.initResizer(),this.positionResizerToTarget(t),this.resizing=this.resizing.bind(this),this.endResize=this.endResize.bind(this),this.startResize=this.startResize.bind(this),this.toolbarClick=this.toolbarClick.bind(this),this.bindEvents()}return t.prototype.initResizer=function(){var t=this.container.querySelector("#editor-resizer");t||((t=document.createElement("div")).setAttribute("id","editor-resizer"),t.innerHTML=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];return t.replace(/\{(\d+)\}/g,function(t,i){return e.length>i?e[i]:""})}(i,this.i18n.findLabel("altTip"),this.i18n.findLabel("floatLeft"),this.i18n.findLabel("center"),this.i18n.findLabel("floatRight"),this.i18n.findLabel("restore")),this.container.appendChild(t)),this.resizer=t},t.prototype.createToobar=function(t){var e,i,n='<div class="toolbar">\n    '.concat(!1!==(null===(e=null==t?void 0:t.toolbar)||void 0===e?void 0:e.sizeTools)?'<div class="group">\n      <a class="btn" data-width="100%">100%</a>\n      <a class="btn" data-width="50%">50%</a>\n      <a  class="btn btn-group">\n      <span data-width="-5" class="inner-btn">﹣</span>\n      <span data-width="5" class="inner-btn">﹢</span>\n      </a>\n      <a data-width="auto" class="btn last-item">{4}</a>\n      </div>':"","\n    ").concat(!1!==(null===(i=null==t?void 0:t.toolbar)||void 0===i?void 0:i.alingTools)?'<div class="group">\n      <a class="btn" data-float="left">{1}</a>\n      <a class="btn" data-float="center">{2}</a>\n      <a class="btn" data-float="right">{3}</a>\n      <a data-float="none" class="btn last-item">{4}</a>\n      </div>':"","\n  </div>");return"".concat('<div class="handler" title="{0}"></div>').concat(!0===(null==t?void 0:t.showSize)?'<div class="showSize" name="ql-size" title="{0}">{size}</div>':"").concat(!1!==(null==t?void 0:t.showToolbar)?n:"")},t.prototype.positionResizerToTarget=function(t){if(null!==this.resizer){for(var e=t,i=t.offsetLeft,r=t.offsetTop;e&&e.offsetParent!=this.resizer.parentElement;)i+=(e=e.offsetParent).offsetLeft,r+=e.offsetTop;this.resizer.style.setProperty("left",i+"px"),this.resizer.style.setProperty("top",r+"px"),this.resizer.style.setProperty("width",t.clientWidth+"px"),this.resizer.style.setProperty("height",t.clientHeight+"px"),(null==n?void 0:n.showSize)&&(document.getElementsByName("ql-size").item(0).innerHTML="".concat(t.getAttribute("width")?t.getAttribute("width"):t.clientWidth,", ").concat(t.getAttribute("height")?t.getAttribute("height"):t.clientHeight))}},t.prototype.bindEvents=function(){null!==this.resizer&&(this.resizer.addEventListener("mousedown",this.startResize),this.resizer.addEventListener("click",this.toolbarClick)),window.addEventListener("mouseup",this.endResize),window.addEventListener("mousemove",this.resizing)},t.prototype.toolbarClick=function(t){var e=t.target;if(e.classList.contains("btn")||e.classList.contains("inner-btn")){var i=e.dataset.width,n=e.dataset.float,r=this.resizeTarget.style;if(i)if("iframe"!==this.resizeTarget.tagName.toLowerCase()&&this.resizeTarget.removeAttribute("height"),"auto"===i)this.resizeTarget.removeAttribute("width");else if(i.includes("%"))this.resizeTarget.setAttribute("width",i);else{var o=this.resizeTarget.getAttribute("width")||"";i=parseInt(i),o=o.includes("%")?Math.min(Math.max(parseInt(o)+i,5),100)+"%":Math.max(this.resizeTarget.clientWidth+i,10)+"px",this.resizeTarget.setAttribute("width",o)}else"center"===n?(r.setProperty("display","block"),r.setProperty("margin","auto"),r.removeProperty("float")):(r.removeProperty("display"),r.removeProperty("margin"),r.setProperty("float",n));this.positionResizerToTarget(this.resizeTarget)}},t.prototype.startResize=function(t){t.target.classList.contains("handler")&&1===t.which&&(this.startResizePosition={left:t.clientX,top:t.clientY,width:this.resizeTarget.clientWidth,height:this.resizeTarget.clientHeight})},t.prototype.endResize=function(){this.startResizePosition=null},t.prototype.resizing=function(t){if(this.startResizePosition){var e=t.clientX-this.startResizePosition.left,i=t.clientY-this.startResizePosition.top,n=this.startResizePosition.width,r=this.startResizePosition.height;if(n+=e,r+=i,t.altKey){var o=this.resizeTarget.originSize;r=o.height/o.width*n}this.resizeTarget.setAttribute("width",Math.max(n,30)+""),this.resizeTarget.setAttribute("height",Math.max(r,30)+""),this.positionResizerToTarget(this.resizeTarget)}},t.prototype.destory=function(){this.container.removeChild(this.resizer),window.removeEventListener("mouseup",this.endResize),window.removeEventListener("mousemove",this.resizing),this.resizer=null},t}(),a=function(t,e){this.element=t,this.cb=e,this.hasTracked=!1},l=function(){function t(){}return t.track=function(e,i){this.iframes.push(new a(e,i)),this.interval||(this.interval=setInterval(function(){t.checkClick()},this.resolution))},t.checkClick=function(){if(document.activeElement){var t=document.activeElement;for(var e in this.iframes)t===this.iframes[e].element?0==this.iframes[e].hasTracked&&(this.iframes[e].cb.apply(window,[]),this.iframes[e].hasTracked=!0):this.iframes[e].hasTracked=!1}},t.resolution=200,t.iframes=[],t.interval=null,t}();return function(t,e){var i,n,r=t.root;r.addEventListener("click",function(t){var o=t.target;t.target&&["img","video"].includes(o.tagName.toLowerCase())&&(i=o,n=new s(o,r.parentElement,e))}),t.on("text-change",function(t,o){r.querySelectorAll("iframe").forEach(function(t){l.track(t,function(){i=t,n=new s(t,r.parentElement,e)})})}),document.addEventListener("mousedown",function(t){var e,r,o,s=t.target;s===i||(null===(r=null===(e=null==n?void 0:n.resizer)||void 0===e?void 0:e.contains)||void 0===r?void 0:r.call(e,s))||(null===(o=null==n?void 0:n.destory)||void 0===o||o.call(n),n=null,i=null)},{capture:!0})}});
